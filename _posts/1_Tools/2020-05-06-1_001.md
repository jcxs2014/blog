---
layout: post
title: Typora编辑器 + PicGo图片管理 + 阿里云OSS图床
date: 2020-05-06 08:00:00 +0800
categories: 七说八道
tag: 工具
---



1. 缘起

使用markdown进行工作记录也有一段时间了，得益于typora在粘贴图片之后，自动拷贝图片到本地目录的功能，也没有什么特别复杂的东西。但是在分享东西给别人的时候，只能导出为pdf或者word，这样做的时候，排版就变得很奇怪，word还能自己调整一下，但是pdf就没有办法解决了。于是我就想如果能直接分享导出的html文件，这样别人只要有浏览器就能看了，但是这个时候就要用到的图床了。图床的作用就是把图片存在网页上，对应的图片生成一个链接，然后利用markdown语法插入到文本中就可以调用图片了。

2. 准备

知道自己想要什么之后，就开始准备了，typora内置了几个图片管理的软件如下图，之所以选择PicGo是因为他的后缀是.app，非常直觉地认为这个软件应该挺适合的，于是就下载了。

![截屏2020-05-06 10.03.08](https://jcxs2014.oss-cn-shanghai.aliyuncs.com/20201002011608.png)

原以为下载一个软件就可以上传图片了，下载的时候也在想，难道一个软件还能免费提供服务器？这个问题在我安装完成之后就被解答了，答案是：不。

![截屏2020-05-06 10.07.31](https://jcxs2014.oss-cn-shanghai.aliyuncs.com/20201002011618.png)

PicGo里面内置了几个流行的图床接口，它只是实现一个集成管理的功能，具体选择哪一个还要看自己选择的图床运营商，然后我又在知乎搜索了几个图床的评价，经过考虑之后决定用GitHub图床，首先是我有**GitHub**账号，其次，GitHub空间似乎没有限制，再者GitHub已经被Microsoft收购，稳定性应该有保证。

说干就干，按照网上的教程一顿操作，typora上传图片的测试是完成了，但是自己上传文档里的图片的时候，发现图片变黑了，在PicGo的相册中，图片也是黑的，打开Github，图片是在里面的。可能是网络不太好，毕竟GitHub是国外的服务器，纠结了一会儿之后遂放弃。

接下来试验**七牛云**图床，七牛云在我刚对图床有点好奇的时候就很有名了，但是那时候没有需求，也就没有过多的了解。这次需求来了，就要好好地研究一下，同样是按照网上的教程注册，建立空间，设置权限等等。到了最后的时候，发现七牛云提供服务，但是需要绑定自己的域名，还要是备案过的，我只是想存个图片啊，为啥要经历这些。七牛云提供一个为期三十天的测试域名，三十天之后会回收，那就意味着，这几天能正常使用，但是三十天之后就不能用了，除非绑定域名。

又上网搜索了一下，发现这个问题的解决也简单，自己买一个域名绑定上就可以了，但是我个人没有做网页的需求，买个域名需要额外的花销，不太值得。然后又看到有人说可以在阿里云买一个域名，还帮助备案，我一想，**阿里云**也有自己的图床服务，不如直接用阿里的好了，如果也需要买域名，就在阿里云买一个，反正大公司，信赖还是有的。

3. 实操

根据PicGo上的图床服务名称，搜索*阿里云OSS*，OSS是对象存储的意思，按照教程的说法，主要有以下步骤：

- 注册账号
- 购买OSS服务的存储空间
- 购买流量（按量计费）
- 创建子用户
- 创建图片存储空间
- 设置PicGo
- 上传图片

下面逐条介绍

- 注册账号

注册账号非常简单，直接点击右上角*免费注册*，用支付宝扫码就可以注册（也有其他可选方式），注册之后不会主动跳转页面，这点比较坑，需要点击登陆再次登录（用注册的方式，扫码或者账号密码）。

![截屏2020-05-06 10.51.53](https://jcxs2014.oss-cn-shanghai.aliyuncs.com/20201002011624.png)

- 购买OSS服务的存储空间

登陆之后，右上角有个人空间的入口，接下来需要购买存储空间。

<img src="https://jcxs2014.oss-cn-shanghai.aliyuncs.com/20201002011631.png" alt="截屏2020-05-06 10.58.51" style="zoom: 50%;" />

点击**控制台**进入，鼠标放在右上角，自动弹出导航栏，选择对**象存储OSS**，由于我已经购买，看不到购买界面了，或者不在这个地方，找找就能看见。

<img src="https://jcxs2014.oss-cn-shanghai.aliyuncs.com/20201002011641.png" alt="截屏2020-05-06 11.03.34" style="zoom:50%;" />

OSS资源包是包月购买的，类型如下。我对图像存储的需求不是很大，前面四个都是默认的选择，后期还可以升级空间。资源包购买一年以上会有7.5折的优惠，考虑到自己入坑了应该就不会轻易爬出来，于是就买了一年。

![截屏2020-05-06 11.09.04](https://jcxs2014.oss-cn-shanghai.aliyuncs.com/20201002011646.png)

- 购买流量（按量计费）

上图只是购买了存储空间，上行下行的流量是需要单独收费的，购买资源包之后，默认的收费方式是按量计费。具体的存储包和流量费用说明参见*[帮助文档](https://help.aliyun.com/document_detail/59636.html?spm=5176.8465980.0.0.4e701450ChgEGF)*，里面有详细说明。

- 创建子用户

主账号的权限太大了，作为图片存储的日常使用建议建立一个子用户。鼠标放在头像处点击*访问控制*，在弹出窗口左侧点击*用户*，接着点击*创建用户*，按照提示输入自己想设置的账户信息。在访问方式中勾选编程访问，这是利用第三方工具上传图片必须的一步。

![截屏2020-05-06 11.46.45](https://jcxs2014.oss-cn-shanghai.aliyuncs.com/20201002011651.png)

![截屏2020-05-06 11.48.01](https://jcxs2014.oss-cn-shanghai.aliyuncs.com/20201002011655.png)

用户创建完成后，会生成*Access ID*和*Access secret*，可以点击**复制**保存在记事本中，备用。

![截屏2020-05-06 11.56.07](https://jcxs2014.oss-cn-shanghai.aliyuncs.com/20201002011700.png)

返回*用户*界面为创立的子用户设置权限，由于只是图片上传，所以选择*管理对象存储服务（OSS）权限*即可，保存

![截屏2020-05-06 11.58.39](https://jcxs2014.oss-cn-shanghai.aliyuncs.com/20201002011705.png)

- 创建图片存储空间

购买存储空间之后，默认流量是按量计费。在控制台的导航栏点击**象存储OSS**，右边有一个窗口显示*Bucket管理*

<img src="https://jcxs2014.oss-cn-shanghai.aliyuncs.com/20201002011709.png" alt="截屏2020-05-06 11.32.37" style="zoom:50%;" />

点击**创建Bucket**，出现下图所示界面，Bucket名称是自己定义的名字，类似于自己在服务器上的账号，不能和别人的一样。因为我买的资源包是*中国大陆通用*，所以区域这里就选择了一个和自己比较近的就可以了，注意区域下面的提示，这个不管你买没买资源包，都会有，不用管它。其他的选项保持默认就行，有些服务开通了可能要另外收费。唯独**读写权限**那一项，需要选择*公共读*，不然图片无法正常显示。

<img src="https://jcxs2014.oss-cn-shanghai.aliyuncs.com/20201002011713.png" alt="截屏2020-05-06 11.34.10" style="zoom:50%;" />

创建完成后，从*Bucket列表*进入自己的Bucket，记住自己的访问域名。

<img src="https://jcxs2014.oss-cn-shanghai.aliyuncs.com/20201002011720.png" alt="截屏2020-05-06 12.07.11" style="zoom:50%;" />

至此，图床的设置已经结束。

- 设置PicGo

<img src="https://jcxs2014.oss-cn-shanghai.aliyuncs.com/20201002011724.png" alt="截屏2020-05-06 12.11.10" style="zoom: 33%;" />

前面四个必填的的对应地填上就可以了，ID和secret是设置子用户之后生成的，存储空间名就是自己设置的独一的Bucket名称，存储区域就是自己访问域名中的前面一段。最后确定，如果只有一个图床那就建议把它设置为默认图床。

- 上传图片

进行操作之前先把typora和PicGo都关闭，然后打开typora进入设置，到**图像**栏，上传服务选择PicGo.app，首先验证图片上传选项，如果之前对图床和PicGo的设置没有问题，软件会自动上传一张图片到服务器，出现上传成功的提示

<img src="https://jcxs2014.oss-cn-shanghai.aliyuncs.com/20201002011729.png" alt="截屏2020-05-06 12.17.16" style="zoom:50%;" />

<img src="https://jcxs2014.oss-cn-shanghai.aliyuncs.com/20201002011735.png" alt="截屏2020-05-06 12.20.53" style="zoom:50%;" />

4. 后记

Typora有上传文档中所有图片的选项，我试了几次，发现上传上去之后，文中的图片被打乱了。所以我暂时不建议批量上传。只能用笨方法，一张一张地上传了。

阿里云的按量计费需要提前往里面充值，昨天产生了大概60M的流量，晚上提醒我欠费0.02元会在24小时之内停止服务。我赶紧去充值了，根据别人的经验，这个流量费也不贵，平时随便用用也不会有多少费用。

现在有了图床，希望以后能多些一点图文并貌的记录吧。